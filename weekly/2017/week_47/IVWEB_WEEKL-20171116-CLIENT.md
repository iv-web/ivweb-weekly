## 文章索引
1、 <a href="#1前端每周清单第-39-期:-openapi-与-grpc-gitlab-的-vue-年度总结graphql技术栈漫游" >前端每周清单第 39 期: OpenAPI 与 gRPC, Gitlab 的 Vue 年度总结，GraphQL技术栈漫游</a><br/>
2、 <a href="#2文章-elton-stoneman访谈工作负载的迁移和在windows上运行docker" >文章： Elton Stoneman访谈：工作负载的迁移和在Windows上运行Docker</a><br/>
3、 <a href="#3layui-220-发布经典模块化前端-ui-框架" >layui 2.2.0 发布，经典模块化前端 UI 框架</a><br/>
4、 <a href="#4tensorflow-lite-正式发布谷歌移动端深度学习框架" >TensorFlow Lite 正式发布，谷歌移动端深度学习框架</a><br/>
5、 <a href="#5安卓架构组件10lifecyclelivedataviewmodel和room" >安卓架构组件1.0：Lifecycle、LiveData、ViewModel和Room</a><br/>
6、 <a href="#6cockroachdb社区meetup暨中国社区成立大会在深召开" >CockroachDB社区Meetup暨中国社区成立大会在深召开</a><br/>
7、 <a href="#7物联网技术周报第-114-期:-arduino-制作手势控制电脑设备" >物联网技术周报第 114 期: Arduino 制作手势控制电脑设备</a><br/>
8、 <a href="#8bash-脚本-set-命令教程" >Bash 脚本 set 命令教程</a><br/>
9、 <a href="#9迷你书-深度学习利器tensorflow程序设计" >迷你书： 深度学习利器：TensorFlow程序设计</a><br/>
10、 <a href="#10openfaas-0610-发布docker-无服务器框架" >OpenFaaS 0.6.10 发布，Docker 无服务器框架</a><br/>
11、 <a href="#11apache-groovy-26-alpha2-发布jvm-动态脚本语言" >Apache Groovy 2.6 alpha2 发布，JVM 动态脚本语言</a><br/>
12、 <a href="#12traefik-143-发布http-反向代理与负载均衡工具" >Traefik 1.4.3 发布，http 反向代理与负载均衡工具</a><br/>
13、 <a href="#13kodi-v176-最终版发布快如闪电" >Kodi v17.6 最终版发布，快如闪电</a><br/>
14、 <a href="#14atom-1221-和-1230-beta1-发布修复-bug" >Atom 1.22.1 和 1.23.0-beta1 发布，修复 Bug</a><br/>
15、 <a href="#15nuclide-v02680-发布基于-atom-开发工具集" >Nuclide v0.268.0 发布，基于 Atom 开发工具集</a><br/>
16、 <a href="#16gitlab-社区版和企业版-1014-版本发布" >GitLab 社区版和企业版 10.1.4 版本发布</a><br/>
17、 <a href="#17arangodb-327-发布多模式数据库" >ArangoDB 3.2.7 发布，多模式数据库</a><br/>
18、 <a href="#18teleport-v25发布支持限制包大小与自定义包协议" >Teleport v2.5发布，支持限制包大小与自定义包协议</a><br/>
19、 <a href="#19深度操作系统-155-beta-发布-小而美的功能" >深度操作系统 15.5 BETA 发布 —— 小而美的功能</a><br/>
20、 <a href="#20高手问答-|-iview-作者带来的-vuejs-实战分享" >高手问答 | iView 作者带来的 Vue.js 实战分享</a><br/>
21、 <a href="#21文章-京东11·11撬动数据中心的支点京东阿基米德" >文章： 京东11·11：撬动数据中心的支点——京东阿基米德</a><br/>
22、 <a href="#22开源系列产品合集-elastic-stack-60-正式版发布" >开源系列产品合集 Elastic Stack 6.0 正式版发布</a><br/>
23、 <a href="#23intellij-idea-201726-发布bug-修复和新特性添加" >IntelliJ IDEA 2017.2.6 发布，Bug 修复和新特性添加</a><br/>
24、 <a href="#24linux-mint-183-beta-发布全新备份工具" >Linux Mint 18.3 Beta 发布，全新备份工具</a><br/>
25、 <a href="#25xapi-manager-v202-发布支持php71php72" >xApi Manager v2.0.2 发布，支持php7.1、php7.2</a><br/>
26、 <a href="#262017-最优秀的十大-linux-服务器发行版" >2017 最优秀的十大 Linux 服务器发行版</a><br/>
27、 <a href="#27文章-以计算机视觉为例告诉你如何将ai引入你的工作" >文章： 以计算机视觉为例，告诉你如何将AI引入你的工作</a><br/>
28、 <a href="#28dubbo-疯狂更新阿里开源要搞大事情" >Dubbo 疯狂更新！阿里开源要搞大事情？</a><br/>
29、 <a href="#29每日一博-|-jenkins+svn+maven-自动化部署环境搭建" >每日一博 | Jenkins+SVN+Maven 自动化部署环境搭建</a><br/>
30、 <a href="#30n-次跳票后fedora-27-正式版终于发布了" >N 次跳票后，Fedora 27 正式版终于发布了</a><br/>
31、 <a href="#31码云周刊-|-盘点那些值得你了解的-10-本编程教程" >码云周刊 | 盘点那些值得你了解的 10 本编程教程</a><br/>
32、 <a href="#32码云推荐-|-java-版-gitee-网站-api-gitee-client" >码云推荐 | Java 版 Gitee 网站 API Gitee-client</a><br/>
33、 <a href="#33chalktalk-数字化演示和交流工具" >Chalktalk —— 数字化演示和交流工具</a><br/>
34、 <a href="#34oschina-周三乱弹-产品经理就爱这么给程序出题" >OSChina 周三乱弹 ——产品经理就爱这么给程序出题</a><br/>
35、 <a href="#35微软首席研究员函数式编程语言时代已经来临" >微软首席研究员：函数式编程语言时代已经来临</a><br/>
36、 <a href="#36慕尼黑放弃-linux2020-年或将全面迁入-windows" >慕尼黑放弃 Linux，2020 年或将全面迁入 Windows</a><br/>
37、 <a href="#37主流浏览器都加入了-webassembly-支持" >主流浏览器都加入了 WebAssembly 支持</a><br/>
38、 <a href="#38elasticsearch-600-正式发布带来大量新特性" >Elasticsearch 6.0.0 正式发布，带来大量新特性</a><br/>
39、 <a href="#39mariadb-10129-发布mysql-分支版本" >MariaDB 10.1.29 发布，MySQL 分支版本</a><br/><h1 id="#title_0" >1、前端每周清单第 39 期: OpenAPI 与 gRPC, Gitlab 的 Vue 年度总结，GraphQL技术栈漫游</h1>
王下邀月熊
[http://www.infoq.com/cn/news/2017/11/arch-weekly-39?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global](http://www.infoq.com/cn/news/2017/11/arch-weekly-39?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global)
<img src="http://www.infoq.com/styles/i/logo_bigger.jpg"/><p>前端每周清单第 39 期: OpenAPI 与 gRPC, Gitlab 的 Vue 年度总结，GraphQL 技术栈漫游</p> <i>By 王下邀月熊</i>
---------------
<h1 id="#title_1" >2、文章： Elton Stoneman访谈：工作负载的迁移和在Windows上运行Docker</h1>
Manuel Pais
[http://www.infoq.com/cn/articles/qa-elton-stoneman-migrate-workload-docker-windows?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global](http://www.infoq.com/cn/articles/qa-elton-stoneman-migrate-workload-docker-windows?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global)
<img src="https://res.infoq.com/articles/qa-elton-stoneman-migrate-workload-docker-windows/zh/headerimage/logo-4-1507743444605.jpg"/><p>Windows 上的Docker还处在早期阶段，但工作负载方面的可能性在不断增加。 InfoQ采访了Elton Stoneman，了解如何在Windows上运行容器以及哪种工作负载是迁移的理想选择。Elton Stoneman是《Docker on Windows》一书的作者，在最近的WinOps大会上作了演讲。</p> <i>By Manuel Pais</i> <i> Translated by 姚佳灵</i>
---------------
<h1 id="#title_2" >3、layui 2.2.0 发布，经典模块化前端 UI 框架</h1>

[https://www.oschina.net/news/90608/layui-2-2-0-released](https://www.oschina.net/news/90608/layui-2-2-0-released)
<p>本次主要核心还是在 table 模块。无论是从代码，还是文档和示例的撰写上，都进行了大量调整。除此之外，form 以及其它的几项改进，也堪称良心之举，这应该会是一次令人愉悦的更新吧。。</p><p>首页下载：</p><p><strong>更新日志如下：</strong></p><p><strong>table 改进</strong></p><ul class=" list-paddingleft-2"><li><p>&nbsp; 新增列宽自动适应功能，允许列宽设置百分比甚至不填写，内部自动分配</p></li><li><p>&nbsp; 新增序号列支持（type:&#39;numbers&#39;）&nbsp;</p></li><li><p>&nbsp; 新增表头的基础参数：type，用于定义列类型（normal/checkbox/space/numbers等）</p></li><li><p>&nbsp; 优化 page 参数，支持传入一个对象，里面可包含 laypage 组件所有支持的参数（jump、elem除外）&nbsp;</p></li><li><p>&nbsp; limit 改为默认 10&nbsp;</p></li><li><p>&nbsp; 自定义模板中，可通过 {{ d.LAY_INDEX }} 获得序号&nbsp;</p></li><li><p>&nbsp; 优化主题样式，风格更加清爽，进一步接近 layui 极简理念&nbsp;</p></li><li><p>&nbsp; 优化单元格编辑样式（之前编辑时的样式不大明显）&nbsp;</p></li><li><p>&nbsp; 修复单元格弹出的更多内容浮层的若干问题&nbsp;</p></li><li><p>&nbsp; 修复 表单元素（如：复选框/开关/单选框） 在数据表格单元格中的样式异常问题&nbsp;</p></li><li><p>&nbsp; 修复表格重载时的左右抖动问题&nbsp;</p></li></ul><p><strong>form 改进</strong></p><ul class=" list-paddingleft-2"><li><p>&nbsp; 设定 lay-verify 时，不再强制必填，除非同时设定了 required，如：lay-verify=&quot;phone|required&quot;</p></li><li><p>&nbsp; 对表单元素新增 lay-verType=&quot;&quot; 属性，用于定义异常提示层模式，可选值有：tips（吸附）、alert（对话框），msg（默认）</p></li><li><p>&nbsp; 搜索选择框匹配到相应选项时，如果未选择相应项，则失去焦点时清空内容（这样做的目的，是为了确保 select 是 option元素中定义的 value，而不是 text）</p></li><li><p>&nbsp; 复选框禁用状态样式优化</p></li></ul><p><strong>其它改进</strong></p><ul class=" list-paddingleft-2"><li><p>&nbsp;&nbsp;carousel 轮播当只有一个条目时，不会再显示指示器</p></li><li><p>&nbsp; 导航条允许设置 lay-unselect 属性，点击指定导航菜单标题时，将不会出现选中效果</p></li><li><p>&nbsp; layui.extend() 方法支持拓展一个自定义路径的 js 模块（可加载远程文件）&nbsp;</p></li><li><p>&nbsp; 优化 layDate 组件范围选择样式</p></li><li><p>&nbsp; 修复 layui.data() 方法无法存储空字符的值的问题&nbsp;</p></li></ul><p><strong>注意事项</strong></p><ul class=" list-paddingleft-2"><li><p>&nbsp;为了统一规范，定义按钮尺寸的 CSS 类：layui-btn-mini 改为 layui-btn-xs、layui-btn-small 改为 layui-btn-sm、layui-btn-big 改为 layui-btn-lg ，升级版本时务必注意</p></li><li><p>&nbsp;&nbsp;注意上述 form 改进的 lay-verify，如果要强制填写，必须设定 required</p></li><li><p>&nbsp; 覆盖升级后，注意清理浏览器缓存</p></li></ul><p><strong>示例图</strong></p><p><img src="https://static.oschina.net/uploads/space/2017/1115/121106_gySf_1168184.png" alt=""/></p><p><img src="https://static.oschina.net/uploads/space/2017/1115/121126_RqHv_1168184.png" alt=""/></p><p><img src="https://static.oschina.net/uploads/space/2017/1115/121135_L0oL_1168184.png" alt=""/></p>
---------------
<h1 id="#title_3" >4、TensorFlow Lite 正式发布，谷歌移动端深度学习框架</h1>

[https://www.oschina.net/news/90613/tensorflow-lite-released](https://www.oschina.net/news/90613/tensorflow-lite-released)
<p>今年 5 月，谷歌曾在 I/O 大会上宣布即将推出 TensorFlow Lite，现在，谷歌终于发布了新工具的开发者预览版本，这是一款 TensorFlow 用于移动设备和嵌入式设备的轻量级解决方案。<br/></p><p>TensorFlow 可以在多个平台上运行，从机架式服务器到小型 IoT 设备。但是随着近年来机器学习模型的广泛使用，出现了在移动和嵌入式设备上部署它们的需求。而 TensorFlow Lite 允许设备端的机器学习模型的低延迟推断。在本文中，TensorFlow 团队将向我们介绍 TensorFlow Lite 的特点，并展示一个可用的轻量级模型。<br/></p><p><strong>设计初衷</strong><br/></p><ul class=" list-paddingleft-2"><li><p>轻量级：允许小 binary size 和快速初始化／启动的设备端机器学习模型进行推断。</p></li><li><p>跨平台：运行时的设计使其可以在不同的平台上运行，最先允许的平台是安卓和 iOS。</p></li><li><p>快速：专为移动设备进行优化，包括大幅提升模型加载时间，支持硬件加速。</p></li></ul><p>现在，越来越多移动设备内置了专门的自定义硬件以高效处理机器学习工作负载。TensorFlow Lite 支持</p>
---------------
<h1 id="#title_4" >5、安卓架构组件1.0：Lifecycle、LiveData、ViewModel和Room</h1>
Abel Avram
[http://www.infoq.com/cn/news/2017/11/android-architecture-components?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global](http://www.infoq.com/cn/news/2017/11/android-architecture-components?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global)
<img src="http://www.infoq.com/styles/i/logo_bigger.jpg"/><p>谷歌推出了安卓架构组件1.0，一系列用于设计“健壮、可测试和可维护app”的组件库。目前包含了Lifecycle、LiveData、ViewModel和Room，其他更多的会陆续推出。</p> <i>By Abel Avram</i> <i> Translated by 薛命灯</i>
---------------
<h1 id="#title_5" >6、CockroachDB社区Meetup暨中国社区成立大会在深召开</h1>
蔡芳芳
[http://www.infoq.com/cn/news/2017/11/CockroachDB-Meetup?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global](http://www.infoq.com/cn/news/2017/11/CockroachDB-Meetup?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global)
<img src="http://www.infoq.com/styles/i/logo_bigger.jpg"/><p>2017年11月4日，受Cockroach Labs邀请，百度DBA团队在深圳百度国际大厦组织举办了中国区首届CockroachDB社区大会，会议上分享了CockroachDB RoadMap，包括CockroachDB release 1.1版本新特性、1.2版本的功能规划以及未来中长期规划。</p> <i>By 蔡芳芳</i>
---------------
<h1 id="#title_6" >7、物联网技术周报第 114 期: Arduino 制作手势控制电脑设备</h1>
黄峰达
[http://www.infoq.com/cn/news/2017/11/iot-weekly-114?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global](http://www.infoq.com/cn/news/2017/11/iot-weekly-114?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global)
<img src="http://www.infoq.com/styles/i/logo_bigger.jpg"/><p> Arduino 制作手势控制电脑设备；Arduino 和 Python在 Bluemix 上开发一个 IoT 应用程序之控制LED灯开关；在 ESP32 上使用 Ruff Lite 与 JavaScript 开发物联网应用；ARM 推出 Mbed Edge，为物联网提供边缘计算功能；微软启动Project Cerberus：强化开源硬件安全；百度DuerOS硅谷公布「普罗米修斯」计划，要在2018年内开放三个超大数据集。</p> <i>By 黄峰达</i>
---------------
<h1 id="#title_7" >8、Bash 脚本 set 命令教程</h1>
阮一峰
[http://www.ruanyifeng.com/blog/2017/11/bash-set.html](http://www.ruanyifeng.com/blog/2017/11/bash-set.html)
<p>服务器的开发和管理离不开 Bash 脚本，掌握它需要学习大量的细节。</p>

        <p><img src="http://www.ruanyifeng.com/blogimg/asset/2017/bg2017111501.png" alt="" title="" /></p>

<p><code>set</code>命令是 Bash 脚本的重要环节，却常常被忽视，导致脚本的安全性和可维护性出问题。本文介绍它的基本用法，让你可以更安心地使用 Bash 脚本。</p>

<h2>一、简介</h2>

<p>我们知道，Bash 执行脚本的时候，会创建一个新的 Shell。</p>

<blockquote><pre><code class="language-bash">
$ bash script.sh
</code></pre></blockquote>

<p>上面代码中，<code>script.sh</code>是在一个新的 Shell 里面执行。这个 Shell 就是脚本的执行环境，Bash 默认给定了这个环境的各种参数。</p>

<p><code>set</code>命令用来修改 Shell 环境的运行参数，也就是可以定制环境。一共有十几个参数可以定制，有完整清单，本文介绍其中最常用的四个。</p>

<p>顺便提一下，如果命令行下不带任何参数，直接运行<code>set</code>，会显示所有的环境变量和 Shell 函数。</p>

<blockquote><pre><code class="language-bash">
$ set
</code></pre></blockquote>

<h2>二、set -u</h2>

<p>执行脚本的时候，如果遇到不存在的变量，Bash 默认忽略它。</p>

<blockquote><pre><code class="language-bash">
#!/usr/bin/env bash

echo $a
echo bar
</code></pre></blockquote>

<p>上面代码中，<code>$a</code>是一个不存在的变量。执行结果如下。</p>

<blockquote><pre><code class="language-bash">
$ bash script.sh

bar
</code></pre></blockquote>

<p>可以看到，<code>echo $a</code>输出了一个空行，Bash 忽略了不存在的<code>$a</code>，然后继续执行<code>echo bar</code>。大多数情况下，这不是开发者想要的行为，遇到变量不存在，脚本应该报错，而不是一声不响地往下执行。</p>

<p><code>set -u</code>就用来改变这种行为。脚本在头部加上它，遇到不存在的变量就会报错，并停止执行。</p>

<blockquote><pre><code class="language-bash">
#!/usr/bin/env bash
set -u

echo $a
echo bar
</code></pre></blockquote>

<p>运行结果如下。</p>

<blockquote><pre><code class="language-bash">
$ bash script.sh
bash: script.sh:行4: a: 未绑定的变量
</code></pre></blockquote>

<p>可以看到，脚本报错了，并且不再执行后面的语句。</p>

<p><code>-u</code>还有另一种写法<code>-o nounset</code>，两者是等价的。</p>

<blockquote><pre><code class="language-bash">
set -o nounset
</code></pre></blockquote>

<h2>三、set -x</h2>

<p>默认情况下，脚本执行后，屏幕只显示运行结果，没有其他内容。如果多个命令连续执行，它们的运行结果就会连续输出。有时会分不清，某一段内容是什么命令产生的。</p>

<p><code>set -x</code>用来在运行结果之前，先输出执行的那一行命令。</p>

<blockquote><pre><code class="language-bash">
#!/usr/bin/env bash
set -x

echo bar
</code></pre></blockquote>

<p>执行上面的脚本，结果如下。</p>

<blockquote><pre><code class="language-bash">
$ bash script.sh
+ echo bar
bar
</code></pre></blockquote>

<p>可以看到，执行<code>echo bar</code>之前，该命令会先打印出来，行首以<code>+</code>表示。这对于调试复杂的脚本是很有用的。</p>

<p><code>-x</code>还有另一种写法<code>-o xtrace</code>。</p>

<blockquote><pre><code class="language-bash">
set -o xtrace
</code></pre></blockquote>

<h2>四、Bash 的错误处理</h2>

<p>如果脚本里面有运行失败的命令（返回值非0），Bash 默认会继续执行后面的命令。</p>

<blockquote><pre><code class="language-bash">
#!/usr/bin/env bash

foo
echo bar
</code></pre></blockquote>

<p>上面脚本中，<code>foo</code>是一个不存在的命令，执行时会报错。但是，Bash 会忽略这个错误，继续往下执行。</p>

<blockquote><pre><code class="language-bash">
$ bash script.sh
script.sh:行3: foo: 未找到命令
bar
</code></pre></blockquote>

<p>可以看到，Bash 只是显示有错误，并没有终止执行。</p>

<p>这种行为很不利于脚本安全和除错。实际开发中，如果某个命令失败，往往需要脚本停止执行，防止错误累积。这时，一般采用下面的写法。</p>

<blockquote><pre><code class="language-bash">
command || exit 1
</code></pre></blockquote>

<p>上面的写法表示只要<code>command</code>有非零返回值，脚本就会停止执行。</p>

<p>如果停止执行之前需要完成多个操作，就要采用下面三种写法。</p>

<blockquote><pre><code class="language-bash">
# 写法一
command || { echo "command failed"; exit 1; }

# 写法二
if ! command; then echo "command failed"; exit 1; fi

# 写法三
command
if [ "$?" -ne 0 ]; then echo "command failed"; exit 1; fi
</code></pre></blockquote>

<p>另外，除了停止执行，还有一种情况。如果两个命令有继承关系，只有第一个命令成功了，才能继续执行第二个命令，那么就要采用下面的写法。</p>

<blockquote><pre><code class="language-bash">
command1 && command2
</code></pre></blockquote>

<h2>五、 set -e</h2>

<p>上面这些写法多少有些麻烦，容易疏忽。<code>set -e</code>从根本上解决了这个问题，它使得脚本只要发生错误，就终止执行。</p>

<blockquote><pre><code class="language-bash">
#!/usr/bin/env bash
set -e

foo
echo bar
</code></pre></blockquote>

<p>执行结果如下。</p>

<blockquote><pre><code class="language-bash">
$ bash script.sh
script.sh:行4: foo: 未找到命令
</code></pre></blockquote>

<p>可以看到，第4行执行失败以后，脚本就终止执行了。</p>

<p><code>set -e</code>根据返回值来判断，一个命令是否运行失败。但是，某些命令的非零返回值可能不表示失败，或者开发者希望在命令失败的情况下，脚本继续执行下去。这时可以暂时关闭<code>set -e</code>，该命令执行结束后，再重新打开<code>set -e</code>。</p>

<blockquote><pre><code class="language-bash">
set +e
command1
command2
set -e
</code></pre></blockquote>

<p>上面代码中，<code>set +e</code>表示关闭<code>-e</code>选项，<code>set -e</code>表示重新打开<code>-e</code>选项。</p>

<p>还有一种方法是使用<code>command || true</code>，使得该命令即使执行失败，脚本也不会终止执行。</p>

<blockquote><pre><code class="language-bash">
#!/bin/bash
set -e

foo || true
echo bar
</code></pre></blockquote>

<p>上面代码中，<code>true</code>使得这一行语句总是会执行成功，后面的<code>echo bar</code>会执行。</p>

<p><code>-e</code>还有另一种写法<code>-o errexit</code>。</p>

<blockquote><pre><code class="language-bash">
set -o errexit
</code></pre></blockquote>

<h2>六、set -o pipefail</h2>

<p><code>set -e</code>有一个例外情况，就是不适用于管道命令。</p>

<p>所谓管道命令，就是多个子命令通过管道运算符（<code>|</code>）组合成为一个大的命令。Bash 会把最后一个子命令的返回值，作为整个命令的返回值。也就是说，只要最后一个子命令不失败，管道命令总是会执行成功，因此它后面命令依然会执行，<code>set -e</code>就失效了。</p>

<p>请看下面这个例子。</p>

<blockquote><pre><code class="language-bash">
#!/usr/bin/env bash
set -e

foo | echo a
echo bar
</code></pre></blockquote>

<p>执行结果如下。</p>

<blockquote><pre><code class="language-bash">
$ bash script.sh
a
script.sh:行4: foo: 未找到命令
bar
</code></pre></blockquote>

<p>上面代码中，<code>foo</code>是一个不存在的命令，但是<code>foo | echo a</code>这个管道命令会执行成功，导致后面的<code>echo bar</code>会继续执行。</p>

<p><code>set -o pipefail</code>用来解决这种情况，只要一个子命令失败，整个管道命令就失败，脚本就会终止执行。</p>

<blockquote><pre><code class="language-bash">
#!/usr/bin/env bash
set -eo pipefail

foo | echo a
echo bar
</code></pre></blockquote>

<p>运行后，结果如下。</p>

<blockquote><pre><code class="language-bash">
$ bash script.sh
a
script.sh:行4: foo: 未找到命令
</code></pre></blockquote>

<p>可以看到，<code>echo bar</code>没有执行。</p>

<h2>七、总结</h2>

<p><code>set</code>命令的上面这四个参数，一般都放在一起使用。</p>

<blockquote><pre><code class="language-bash">
# 写法一
set -euxo pipefail

# 写法二
set -eux
set -o pipefail
</code></pre></blockquote>

<p>这两种写法建议放在所有 Bash 脚本的头部。</p>

<p>另一种办法是在执行 Bash 脚本的时候，从命令行传入这些参数。</p>

<blockquote><pre><code class="language-bash">
$ bash -euxo pipefail script.sh
</code></pre></blockquote>

<h2>八、参考链接</h2>

<ul>
<li></li>
<li></li>
<li></li>
</ul>

<p>（完）</p>

        <div style="color:#556677;line-height:160%;padding:0.3em 0.5em;border:1px solid #d3d3d3;margin:1em;background-color:#AAD2F0;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;"><h3>文档信息</h3>
<ul>
<li>版权声明：自由转载-非商用-非衍生-保持署名（）</li>
<li>发表日期： <abbr class="published" title="2017-11-15T08:19:18+08:00">2017年11月15日</abbr></li>
<li>更多内容：   » 
 
</li>
<li>博客文集：</li>
<li>社交媒体：</li>
<li>Feed订阅： </li>

</ul></div>        
        <div style="color:#556677;line-height:160%;padding:0.3em 0.5em;margin:1em;-moz-border-radius: 10px;-webkit-border-radius:10px;border-radius: 10px;"></div>
---------------
<h1 id="#title_8" >9、迷你书： 深度学习利器：TensorFlow程序设计</h1>
武维
[http://www.infoq.com/cn/minibooks/tensorflow-programing?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global](http://www.infoq.com/cn/minibooks/tensorflow-programing?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global)
<img src="https://res.infoq.com/minibooks/tensorflow-programing/zh/smallimage/100-1510627875939.jpg"/><p>本书TensorFlow程序设计中的关键技术主要包括以下几个方面：TensorFlow编程基础及实践；TensorFlow系统架构及C/C++编程API；分布式TensorFlow技术；TensorFlow与卷积神经网络；TensorFlow与自然语言处理模型；TensorFlow在智能终端中的应用。</p> <i>By 武维</i>
---------------
<h1 id="#title_9" >10、OpenFaaS 0.6.10 发布，Docker 无服务器框架</h1>

[https://www.oschina.net/news/90625/openfaas-0-6-10](https://www.oschina.net/news/90625/openfaas-0-6-10)
<p>OpenFaaS 是一个使用 Docker 构建无服务器(Serverless)功能的框架，它拥有对指标的一级支持。任何流程都可以打包为一个函数，使你能够使用一系列 web 事件，而无需重复的样板化编码。</p><p><img alt="" height="345" data-cke-saved-src="https://static.oschina.net/uploads/space/2017/0918/005824_Bt0J_2720166.jpg" src="https://static.oschina.net/uploads/space/2017/0918/005824_Bt0J_2720166.jpg" width="600"/></p><p>OpenFaaS 0.6.10 已发布，更新如下：</p><ul class=" list-paddingleft-2"><li><p>Adds Memory requests &amp; limits via&nbsp;</p></li></ul>
---------------
<h1 id="#title_10" >11、Apache Groovy 2.6 alpha2 发布，JVM 动态脚本语言</h1>

[https://www.oschina.net/news/90624/apache-groovy-2-6-alpha2-released](https://www.oschina.net/news/90624/apache-groovy-2-6-alpha2-released)
<p>Apache Groovy 2.6 alpha2 已发布，此版本包含10项修复和改进：<br/></p><p>修复</p><ul class=" list-paddingleft-2"><li><p>[<br/></p><p>Apache Groovy 2.6.0-alpha-2 需要 JDK7 +。</p>
---------------
<h1 id="#title_11" >12、Traefik 1.4.3 发布，http 反向代理与负载均衡工具</h1>

[https://www.oschina.net/news/90623/traefik-1-4-3](https://www.oschina.net/news/90623/traefik-1-4-3)
<p>traefik 1.4.3&nbsp;已发布，traefik 是一个新型的http反向代理、负载均衡软件，能轻易的部署微服务. 它支持多种后端 (Docker,&nbsp;Swarm,&nbsp;Mesos/Marathon,&nbsp;Consul,&nbsp;Etcd,&nbsp;Zookeeper,&nbsp;BoltDB, Rest API, file...) ,可以对配置进行自动化、动态的管理。</p><p>该版本修复了一些关于&nbsp;consulcatalog、kv 和中间件的 bug , 并对文档里面的错字、链接进行了修正。详情可查阅。</p><p><img height="1050" data-cke-saved-src="https://static.oschina.net/uploads/space/2017/1115/184820_tHft_2896879.png" src="https://static.oschina.net/uploads/space/2017/1115/184820_tHft_2896879.png" width="1921"/></p>
---------------
<h1 id="#title_12" >13、Kodi v17.6 最终版发布，快如闪电</h1>

[https://www.oschina.net/news/90622/kodi-17-6-final](https://www.oschina.net/news/90622/kodi-17-6-final)
<p>Kodi&nbsp;发布了&nbsp;v17.6&nbsp;正式版，这也是 v17.x&nbsp;系列的最后一个版本。项目正稳步走向新的 v18 系列，代号为 “ Leia” 。<br/></p><p>该版本主要针对稳定性和可用性修复，包括：</p><ul class=" list-paddingleft-2"><li><p>修复控制器对话框中可能存在的崩溃问题</p></li><li><p>将 tandard scrapers 更新到最新版本</p></li><li><p>修复内部网络服务器可能存在的连接问题</p></li><li><p>修复当外设操作杆的附加功能被禁用时引起的崩溃问题</p></li></ul><p></p>
---------------
<h1 id="#title_13" >14、Atom 1.22.1 和 1.23.0-beta1 发布，修复 Bug</h1>

[https://www.oschina.net/news/90621/github-atom-1-22-1-released](https://www.oschina.net/news/90621/github-atom-1-22-1-released)
<p>Atom 是 Github 专门为程序员推出的一个跨平台文本编辑器。具有简洁和直观的图形用户界面，并有很多有趣的特点：支持CSS，HTML，JavaScript 等网页编程语言。它支持宏，自动完成分屏功能，集成了文件管理器。<br/></p><p>。</p>
---------------
<h1 id="#title_14" >15、Nuclide v0.268.0 发布，基于 Atom 开发工具集</h1>

[https://www.oschina.net/news/90620/nuclide-0-268-0](https://www.oschina.net/news/90620/nuclide-0-268-0)
<p>Nuclide v0.268.0 已发布，该版本升级至了 Atom 1.22&nbsp;。具体内容如下：<br/></p><ul class=" list-paddingleft-2"><li><p>Nuclide&#39;s SSH tunnel now works in both directions!</p></li><li><p>Upgrade to&nbsp;&nbsp;JavaScript 类型检查器。</p><p><img height="1474" data-cke-saved-src="https://static.oschina.net/uploads/space/2017/0204/111421_LiAh_2896879.png" src="https://static.oschina.net/uploads/space/2017/0204/111421_LiAh_2896879.png" width="2522"/></p>
---------------
<h1 id="#title_15" >16、GitLab 社区版和企业版 10.1.4 版本发布</h1>

[https://www.oschina.net/news/90619/gitlab-10-1-4-released](https://www.oschina.net/news/90619/gitlab-10-1-4-released)
<p>GitLab 10.1.4 版本已发布 ，包括社区版和企业版。该版本解决了 10.1.3 及之前版本中的一些问题和&nbsp;bug 。包括：</p><ul class=" list-paddingleft-2"><li><p>CE/EES/EEP:&nbsp;Format bytes to human readable number in registry table (</p>
---------------
<h1 id="#title_16" >17、ArangoDB 3.2.7 发布，多模式数据库</h1>

[https://www.oschina.net/news/90618/arangodb-3-2-7](https://www.oschina.net/news/90618/arangodb-3-2-7)
<p>ArangoDB 3.2.7 发布了，ArangoDB&nbsp;是一个开源的分布式原生多模型数据库 (Apache 2 license)。</p><h3>理念&nbsp;&nbsp;</h3><p><span style="box-sizing: border-box; font-weight: bolder;">利用一个引擎，一个 query 语法，一项数据库技术，以及多个数据模型，来最大力度满足项目的灵活性，简化技术堆栈，简化数据库运维，降低运营成本。</span></p><p>ArangoDB原生多模型数据库，指的是兼有图 (graph)、文档 (document)和键/值对 (key/value) 三种数据模型存储软件。其快捷灵活之处在于，它有适用于全部三种数据模型的统一内核和统一数据库查询语言——(ArangoDB Query Language)。其可以涵盖全部三种数据模型，还允许在单个查询中混合使用三种数据模型。</p><p>因此，用户可以在单次查询过程中混合使用多种数据模型，而无需在不同数据模型间相互“切换”，也不需要执行数据传输过程。并且这三种数据模型均支持水平扩展。基于其本地集成多模型特性，ArangoDB 原生多模型数据库适用于搭建高性能应用程序。</p><p>该版本修复了很多 Bug，详细内容如下：</p><pre class="brush:shell;toolbar: true; auto-links: false;">*&nbsp;Cluster&nbsp;customers,&nbsp;which&nbsp;have&nbsp;upgraded&nbsp;from&nbsp;3.1&nbsp;to&nbsp;3.2&nbsp;need&nbsp;to&nbsp;upgrade&nbsp;&nbsp;&nbsp;&nbsp;
to&nbsp;3.2.7.&nbsp;The&nbsp;cluster&nbsp;supervision&nbsp;is&nbsp;otherwise&nbsp;not&nbsp;operational.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;Fixed&nbsp;issue&nbsp;#3597:&nbsp;AQL&nbsp;with&nbsp;path&nbsp;filters&nbsp;returns&nbsp;unexpected&nbsp;results&nbsp;&nbsp;&nbsp;&nbsp;
In&nbsp;some&nbsp;cases&nbsp;breadth&nbsp;first&nbsp;search&nbsp;in&nbsp;combination&nbsp;with&nbsp;vertex&nbsp;filters&nbsp;&nbsp;&nbsp;&nbsp;
yields&nbsp;wrong&nbsp;result,&nbsp;the&nbsp;filter&nbsp;was&nbsp;not&nbsp;applied&nbsp;correctly.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;fixed&nbsp;some&nbsp;undefined&nbsp;behavior&nbsp;in&nbsp;some&nbsp;internal&nbsp;value&nbsp;caches&nbsp;for&nbsp;AQL&nbsp;GatherNodes&nbsp;&nbsp;&nbsp;&nbsp;
and&nbsp;SortNodes,&nbsp;which&nbsp;could&nbsp;have&nbsp;led&nbsp;to&nbsp;sorted&nbsp;results&nbsp;being&nbsp;effectively&nbsp;not&nbsp;&nbsp;&nbsp;&nbsp;
correctly&nbsp;sorted.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;make&nbsp;the&nbsp;replication&nbsp;applier&nbsp;for&nbsp;the&nbsp;RocksDB&nbsp;engine&nbsp;start&nbsp;automatically&nbsp;after&nbsp;a&nbsp;&nbsp;&nbsp;&nbsp;
restart&nbsp;of&nbsp;the&nbsp;server&nbsp;if&nbsp;the&nbsp;applier&nbsp;was&nbsp;configured&nbsp;with&nbsp;its&nbsp;`autoStart`&nbsp;property&nbsp;&nbsp;&nbsp;&nbsp;
set&nbsp;to&nbsp;`true`.&nbsp;previously&nbsp;the&nbsp;replication&nbsp;appliers&nbsp;were&nbsp;only&nbsp;automatically&nbsp;restarted&nbsp;&nbsp;&nbsp;&nbsp;
at&nbsp;server&nbsp;start&nbsp;for&nbsp;the&nbsp;MMFiles&nbsp;engine.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;fixed&nbsp;arangodump&nbsp;batch&nbsp;size&nbsp;adaptivity&nbsp;in&nbsp;cluster&nbsp;mode&nbsp;and&nbsp;upped&nbsp;default&nbsp;batch&nbsp;size&nbsp;&nbsp;&nbsp;&nbsp;
for&nbsp;arangodump&nbsp;&nbsp;&nbsp;&nbsp;
these&nbsp;changes&nbsp;speed&nbsp;up&nbsp;arangodump&nbsp;in&nbsp;cluster&nbsp;context&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;smart&nbsp;graphs&nbsp;now&nbsp;return&nbsp;a&nbsp;proper&nbsp;inventory&nbsp;in&nbsp;response&nbsp;to&nbsp;replication&nbsp;inventory&nbsp;&nbsp;&nbsp;&nbsp;
requests&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;fixed&nbsp;issue&nbsp;#3618:&nbsp;Inconsistent&nbsp;behavior&nbsp;of&nbsp;OR&nbsp;statement&nbsp;with&nbsp;object&nbsp;bind&nbsp;parameters&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;only&nbsp;users&nbsp;with&nbsp;read/write&nbsp;rights&nbsp;on&nbsp;the&nbsp;&quot;_system&quot;&nbsp;database&nbsp;can&nbsp;now&nbsp;execute&nbsp;&nbsp;&nbsp;&nbsp;
&quot;_admin/shutdown&quot;&nbsp;as&nbsp;well&nbsp;as&nbsp;modify&nbsp;properties&nbsp;of&nbsp;the&nbsp;write-ahead&nbsp;log&nbsp;(WAL)&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;increase&nbsp;default&nbsp;maximum&nbsp;number&nbsp;of&nbsp;V8&nbsp;contexts&nbsp;to&nbsp;at&nbsp;least&nbsp;16&nbsp;if&nbsp;not&nbsp;explicitly&nbsp;&nbsp;&nbsp;&nbsp;
configured&nbsp;otherwise.&nbsp;&nbsp;&nbsp;&nbsp;
the&nbsp;procedure&nbsp;for&nbsp;determining&nbsp;the&nbsp;actual&nbsp;maximum&nbsp;value&nbsp;of&nbsp;V8&nbsp;contexts&nbsp;is&nbsp;unchanged&nbsp;&nbsp;&nbsp;&nbsp;
apart&nbsp;from&nbsp;the&nbsp;value&nbsp;`16`&nbsp;and&nbsp;works&nbsp;as&nbsp;follows:&nbsp;&nbsp;&nbsp;&nbsp;
-&nbsp;if&nbsp;explicitly&nbsp;set,&nbsp;the&nbsp;value&nbsp;of&nbsp;the&nbsp;configuration&nbsp;option&nbsp;`--javascript.v8-contexts`&nbsp;&nbsp;&nbsp;&nbsp;
is&nbsp;used&nbsp;as&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;V8&nbsp;contexts&nbsp;&nbsp;&nbsp;&nbsp;
-&nbsp;when&nbsp;the&nbsp;option&nbsp;is&nbsp;not&nbsp;set,&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;V8&nbsp;contexts&nbsp;is&nbsp;determined&nbsp;&nbsp;&nbsp;&nbsp;
by&nbsp;the&nbsp;configuration&nbsp;option&nbsp;`--server.threads`&nbsp;if&nbsp;that&nbsp;option&nbsp;is&nbsp;set.&nbsp;if&nbsp;&nbsp;&nbsp;&nbsp;
`--server.threads`&nbsp;is&nbsp;not&nbsp;set,&nbsp;then&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;V8&nbsp;contexts&nbsp;is&nbsp;the&nbsp;&nbsp;&nbsp;&nbsp;
server&#39;s&nbsp;reported&nbsp;hardware&nbsp;concurrency&nbsp;(number&nbsp;of&nbsp;processors&nbsp;visible&nbsp;&nbsp;&nbsp;&nbsp;
to&nbsp;the&nbsp;arangod&nbsp;process).&nbsp;if&nbsp;that&nbsp;would&nbsp;result&nbsp;in&nbsp;a&nbsp;maximum&nbsp;value&nbsp;of&nbsp;less&nbsp;than&nbsp;16&nbsp;&nbsp;&nbsp;&nbsp;
in&nbsp;any&nbsp;of&nbsp;these&nbsp;two&nbsp;cases,&nbsp;then&nbsp;the&nbsp;maximum&nbsp;value&nbsp;will&nbsp;be&nbsp;increased&nbsp;to&nbsp;16.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;fixed&nbsp;issue&nbsp;#3447:&nbsp;ArangoError&nbsp;1202:&nbsp;AQL:&nbsp;NotFound:&nbsp;(while&nbsp;executing)&nbsp;when&nbsp;&nbsp;&nbsp;&nbsp;
updating&nbsp;collection&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;potential&nbsp;fix&nbsp;for&nbsp;issue&nbsp;#3581:&nbsp;Unexpected&nbsp;&quot;rocksdb&nbsp;unique&nbsp;constraint&nbsp;&nbsp;&nbsp;&nbsp;
violated&quot;&nbsp;with&nbsp;unique&nbsp;hash&nbsp;index&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;fixed&nbsp;geo&nbsp;index&nbsp;optimizer&nbsp;rule&nbsp;for&nbsp;geo&nbsp;indexes&nbsp;with&nbsp;a&nbsp;single&nbsp;(array&nbsp;of&nbsp;coordinates)&nbsp;&nbsp;&nbsp;&nbsp;
attribute.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;improved&nbsp;the&nbsp;speed&nbsp;of&nbsp;the&nbsp;shards&nbsp;overview&nbsp;in&nbsp;cluster&nbsp;(API&nbsp;endpoint&nbsp;/_api/cluster/shardDistribution&nbsp;API)&nbsp;&nbsp;&nbsp;&nbsp;
It&nbsp;is&nbsp;now&nbsp;guaranteed&nbsp;to&nbsp;return&nbsp;after&nbsp;~2&nbsp;seconds&nbsp;even&nbsp;if&nbsp;the&nbsp;entire&nbsp;cluster&nbsp;is&nbsp;unresponsive.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;fix&nbsp;agency&nbsp;precondition&nbsp;check&nbsp;for&nbsp;complex&nbsp;objects&nbsp;&nbsp;&nbsp;&nbsp;
this&nbsp;fixes&nbsp;issues&nbsp;with&nbsp;several&nbsp;CAS&nbsp;operations&nbsp;in&nbsp;the&nbsp;agency&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;several&nbsp;fixes&nbsp;for&nbsp;agency&nbsp;restart&nbsp;and&nbsp;shutdown&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;the&nbsp;cluster-internal&nbsp;representation&nbsp;of&nbsp;planned&nbsp;collection&nbsp;objects&nbsp;is&nbsp;now&nbsp;more&nbsp;&nbsp;&nbsp;&nbsp;
lightweight&nbsp;than&nbsp;before,&nbsp;using&nbsp;less&nbsp;memory&nbsp;and&nbsp;not&nbsp;allocating&nbsp;any&nbsp;cache&nbsp;for&nbsp;indexes&nbsp;&nbsp;&nbsp;&nbsp;
etc.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;fixed&nbsp;issue&nbsp;#3403:&nbsp;How&nbsp;to&nbsp;kill&nbsp;long&nbsp;running&nbsp;AQL&nbsp;queries&nbsp;with&nbsp;the&nbsp;browser&nbsp;console&#39;s&nbsp;&nbsp;&nbsp;&nbsp;
AQL&nbsp;(display&nbsp;issue)&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;fixed&nbsp;issue&nbsp;#3549:&nbsp;server&nbsp;reading&nbsp;ENGINE&nbsp;config&nbsp;file&nbsp;fails&nbsp;on&nbsp;common&nbsp;standard&nbsp;&nbsp;&nbsp;&nbsp;
newline&nbsp;character&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;UI:&nbsp;fixed&nbsp;error&nbsp;notifications&nbsp;for&nbsp;collection&nbsp;modifications&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;several&nbsp;improvements&nbsp;for&nbsp;the&nbsp;truncate&nbsp;operation&nbsp;on&nbsp;collections:&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;the&nbsp;timeout&nbsp;for&nbsp;the&nbsp;truncate&nbsp;operation&nbsp;was&nbsp;increased&nbsp;in&nbsp;cluster&nbsp;mode&nbsp;in&nbsp;&nbsp;&nbsp;&nbsp;
order&nbsp;to&nbsp;prevent&nbsp;too&nbsp;frequent&nbsp;&quot;could&nbsp;not&nbsp;truncate&nbsp;collection&quot;&nbsp;errors&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;after&nbsp;a&nbsp;truncate&nbsp;operation,&nbsp;collections&nbsp;in&nbsp;MMFiles&nbsp;still&nbsp;used&nbsp;disk&nbsp;space.&nbsp;&nbsp;&nbsp;&nbsp;
to&nbsp;reclaim&nbsp;disk&nbsp;space&nbsp;used&nbsp;by&nbsp;truncated&nbsp;collection,&nbsp;the&nbsp;truncate&nbsp;actions&nbsp;&nbsp;&nbsp;&nbsp;
in&nbsp;the&nbsp;web&nbsp;interface&nbsp;and&nbsp;from&nbsp;the&nbsp;ArangoShell&nbsp;now&nbsp;issue&nbsp;an&nbsp;extra&nbsp;WAL&nbsp;flush&nbsp;&nbsp;&nbsp;&nbsp;
command&nbsp;(in&nbsp;cluster&nbsp;mode,&nbsp;this&nbsp;command&nbsp;is&nbsp;also&nbsp;propagated&nbsp;to&nbsp;all&nbsp;servers).&nbsp;&nbsp;&nbsp;&nbsp;
the&nbsp;WAL&nbsp;flush&nbsp;allows&nbsp;all&nbsp;servers&nbsp;to&nbsp;write&nbsp;out&nbsp;any&nbsp;pending&nbsp;operations&nbsp;into&nbsp;the&nbsp;&nbsp;&nbsp;&nbsp;
datafiles&nbsp;of&nbsp;the&nbsp;truncated&nbsp;collection.&nbsp;afterwards,&nbsp;a&nbsp;final&nbsp;journal&nbsp;rotate&nbsp;&nbsp;&nbsp;&nbsp;
command&nbsp;is&nbsp;sent,&nbsp;which&nbsp;enables&nbsp;the&nbsp;compaction&nbsp;to&nbsp;entirely&nbsp;remove&nbsp;all&nbsp;datafiles&nbsp;&nbsp;&nbsp;&nbsp;
and&nbsp;journals&nbsp;for&nbsp;the&nbsp;truncated&nbsp;collection,&nbsp;so&nbsp;that&nbsp;all&nbsp;disk&nbsp;space&nbsp;can&nbsp;be&nbsp;&nbsp;&nbsp;&nbsp;
reclaimed&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;for&nbsp;MMFiles&nbsp;a&nbsp;special&nbsp;method&nbsp;will&nbsp;be&nbsp;called&nbsp;after&nbsp;a&nbsp;truncate&nbsp;operation&nbsp;so&nbsp;that&nbsp;&nbsp;&nbsp;&nbsp;
all&nbsp;indexes&nbsp;of&nbsp;the&nbsp;collection&nbsp;can&nbsp;free&nbsp;most&nbsp;of&nbsp;their&nbsp;memory.&nbsp;previously&nbsp;some&nbsp;&nbsp;&nbsp;&nbsp;
indexes&nbsp;(hash&nbsp;and&nbsp;skiplist&nbsp;indexes)&nbsp;partially&nbsp;kept&nbsp;already&nbsp;allocated&nbsp;memory&nbsp;&nbsp;&nbsp;&nbsp;
in&nbsp;order&nbsp;to&nbsp;avoid&nbsp;future&nbsp;memory&nbsp;allocations&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;after&nbsp;a&nbsp;truncate&nbsp;operation&nbsp;in&nbsp;the&nbsp;RocksDB&nbsp;engine,&nbsp;an&nbsp;additional&nbsp;compaction&nbsp;&nbsp;&nbsp;&nbsp;
will&nbsp;be&nbsp;triggered&nbsp;for&nbsp;the&nbsp;truncated&nbsp;collection.&nbsp;this&nbsp;compaction&nbsp;removes&nbsp;all&nbsp;&nbsp;&nbsp;&nbsp;
deletions&nbsp;from&nbsp;the&nbsp;key&nbsp;space&nbsp;so&nbsp;that&nbsp;follow-up&nbsp;scans&nbsp;over&nbsp;the&nbsp;collection&#39;s&nbsp;key&nbsp;&nbsp;&nbsp;&nbsp;
range&nbsp;do&nbsp;not&nbsp;have&nbsp;to&nbsp;filter&nbsp;out&nbsp;lots&nbsp;of&nbsp;already-removed&nbsp;values&nbsp;&nbsp;&nbsp;&nbsp;
These&nbsp;changes&nbsp;make&nbsp;truncate&nbsp;operations&nbsp;potentially&nbsp;more&nbsp;time-consuming&nbsp;than&nbsp;before,&nbsp;&nbsp;&nbsp;&nbsp;
but&nbsp;allow&nbsp;for&nbsp;memory/disk&nbsp;space&nbsp;savings&nbsp;afterwards.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;enable&nbsp;JEMalloc&nbsp;background&nbsp;threads&nbsp;for&nbsp;purging&nbsp;and&nbsp;returning&nbsp;unused&nbsp;memory&nbsp;&nbsp;&nbsp;&nbsp;
back&nbsp;to&nbsp;the&nbsp;operating&nbsp;system&nbsp;(Linux&nbsp;only)&nbsp;&nbsp;&nbsp;&nbsp;
JEMalloc&nbsp;will&nbsp;create&nbsp;its&nbsp;background&nbsp;threads&nbsp;on&nbsp;demand.&nbsp;The&nbsp;number&nbsp;of&nbsp;background&nbsp;&nbsp;&nbsp;&nbsp;
threads&nbsp;is&nbsp;capped&nbsp;by&nbsp;the&nbsp;number&nbsp;of&nbsp;CPUs&nbsp;or&nbsp;active&nbsp;arenas.&nbsp;The&nbsp;background&nbsp;threads&nbsp;run&nbsp;&nbsp;&nbsp;&nbsp;
periodically&nbsp;and&nbsp;purge&nbsp;unused&nbsp;memory&nbsp;pages,&nbsp;allowing&nbsp;memory&nbsp;to&nbsp;be&nbsp;returned&nbsp;to&nbsp;the&nbsp;&nbsp;&nbsp;&nbsp;
operating&nbsp;system.&nbsp;&nbsp;&nbsp;&nbsp;
This&nbsp;change&nbsp;will&nbsp;make&nbsp;the&nbsp;arangod&nbsp;process&nbsp;create&nbsp;several&nbsp;additional&nbsp;threads.&nbsp;&nbsp;&nbsp;&nbsp;
It&nbsp;is&nbsp;accompanied&nbsp;by&nbsp;an&nbsp;increased&nbsp;`TasksMax`&nbsp;value&nbsp;in&nbsp;the&nbsp;systemd&nbsp;service&nbsp;configuration&nbsp;&nbsp;&nbsp;&nbsp;
file&nbsp;for&nbsp;the&nbsp;arangodb3&nbsp;service.&nbsp;&nbsp;&nbsp;&nbsp;
*&nbsp;upgraded&nbsp;bundled&nbsp;V8&nbsp;engine&nbsp;to&nbsp;bugfix&nbsp;version&nbsp;v5.7.492.77&nbsp;&nbsp;&nbsp;&nbsp;
this&nbsp;upgrade&nbsp;fixes&nbsp;a&nbsp;memory&nbsp;leak&nbsp;in&nbsp;upstream&nbsp;V8&nbsp;described&nbsp;in&nbsp;&nbsp;&nbsp;&nbsp;
https://bugs.chromium.org/p/v8/issues/detail?id=5945&nbsp;that&nbsp;will&nbsp;result&nbsp;in&nbsp;memory&nbsp;&nbsp;&nbsp;&nbsp;
chunks&nbsp;only&nbsp;getting&nbsp;uncommitted&nbsp;but&nbsp;not&nbsp;unmapped</pre><p><br/></p>
---------------
<h1 id="#title_17" >18、Teleport v2.5发布，支持限制包大小与自定义包协议</h1>

[https://www.oschina.net/news/90617/teleport-2-5](https://www.oschina.net/news/90617/teleport-2-5)
<p style="color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;">Teleport&nbsp;v2.5（简称tp v2.5）今日发布啦！它是一个通用、高效、灵活的TCP Socket框架。可用于Peer-Peer对等通信、RPC、长连接网关、微服务、推送服务，游戏服务等领域。这次升级新增了自定义通信协议、包大小限制等一些新特性，并作了一系列深度优化。</p><p style="color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;"><span style="font-weight:700;">tp v2.5 特性变化：</span> </p><ul style="margin-left:22px;color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;" class=" list-paddingleft-2"><li><p>
		【新增】支持设置读取包的大小限制（如果超出则断开连接）	</p></li><li><p>
		【新增】支持定制通信协议	</p></li><li><p>
		【升级】支持插件机制，可以自定义认证、心跳、微服务注册中心、统计信息插件等	</p></li><li><p>
		【优化】无论服务器或客户端，均支持优雅重启、优雅关闭	</p></li><li><p>
		支持实现反向代理功能	</p></li><li><p>
		【优化】日志信息详尽，支持打印输入、输出消息的详细信息（状态码、消息头、消息体）	</p></li><li><p>
		服务器和客户端之间对等通信，两者API方法基本一致	</p></li><li><p>
		底层通信数据包包含Header和Body两部分	</p></li><li><p>
		支持单独定制Header和Body编码类型，例如JSON&nbsp;Protobuf&nbsp;string	</p></li><li><p>
		Body支持gzip压缩	</p></li><li><p>
		Header包含状态码及其描述文本	</p></li><li><p>
		支持推、拉、回复等通信模式	</p></li><li><p>
		支持设置慢操作报警阈值	</p></li><li><p>
		底层连接使用I/O缓冲区	</p></li><li><p>
		端点间通信使用I/O多路复用技术	</p></li></ul><p><img src="http://upload-images.jianshu.io/upload_images/4942392-9a4d2f1b84898850.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" style="height:auto;"/> 
		</p><p>
		teleport	</p><hr/><p style="color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;"><span style="font-weight:700;">tp v2.5 升级详情：</span> </p><p style="color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;">
	一、增加对自定义通信协议的支持，通过实现socket.Protocol接口来定制：</p><pre class="hljs go">//&nbsp;Protocol&nbsp;socket&nbsp;communication&nbsp;protocol&nbsp;type&nbsp;Protocol&nbsp;interface&nbsp;{&nbsp;//&nbsp;WritePacket&nbsp;writes&nbsp;header&nbsp;and&nbsp;body&nbsp;to&nbsp;the&nbsp;connection.&nbsp;WritePacket(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;packet&nbsp;*Packet,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;destWriter&nbsp;*utils.BufioWriter,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmpCodecWriterGetter&nbsp;func(string)&nbsp;(*TmpCodecWriter,&nbsp;error),&nbsp;isActiveClosed&nbsp;func()&nbsp;bool,
&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;error&nbsp;//&nbsp;ReadPacket&nbsp;reads&nbsp;header&nbsp;and&nbsp;body&nbsp;from&nbsp;the&nbsp;connection.&nbsp;ReadPacket(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;packet&nbsp;*Packet,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bodyAdapter&nbsp;func()&nbsp;interface{},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;srcReader&nbsp;*utils.BufioReader,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;codecReaderGetter&nbsp;func(byte)&nbsp;(*CodecReader,&nbsp;error),&nbsp;isActiveClosed&nbsp;func()&nbsp;bool,&nbsp;checkReadLimit&nbsp;func(int64)&nbsp;error,
&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;error&nbsp;}</pre><p style="color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;">
	然后，可以通过以下任意方法指定自己的通信协议：</p><pre class="hljs go">func&nbsp;SetDefaultProtocol(socket.Protocol)&nbsp;func&nbsp;(*Peer)&nbsp;ServeConn(conn&nbsp;net.Conn,&nbsp;protocol&nbsp;...socket.Protocol)&nbsp;Session&nbsp;func&nbsp;(*Peer)&nbsp;DialContext(ctx&nbsp;context.Context,&nbsp;addr&nbsp;string,&nbsp;protocol&nbsp;...socket.Protocol)&nbsp;(Session,&nbsp;error)&nbsp;func&nbsp;(*Peer)&nbsp;Dial(addr&nbsp;string,&nbsp;protocol&nbsp;...socket.Protocol)&nbsp;(Session,&nbsp;error)&nbsp;func&nbsp;(*Peer)&nbsp;Listen(protocol&nbsp;...socket.Protocol)&nbsp;error</pre><p style="color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;">
	二、新增限制通信包大小</p><p style="color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;">
	在读取包时可以限制包的大小，如果超出最大值则会主动断开连接。全局设置函数：</p><pre class="hljs go">func&nbsp;SetReadLimit(maxPacketSize&nbsp;int64)</pre><p style="color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;">
	三、升级插件接口</p><ol style="margin-left:22px;color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;" class=" list-paddingleft-2"><li><p>
		插件返回值由以前的error改为tp.Xerror，从而用户可以灵活地在插件中定义错误码和错误描述；	</p></li><li><p>
		增加更多、更细、更合理的插件位置	</p></li><li><p>
		插件执行出错时的日志格式更加清晰整洁	</p></li></ol><pre class="hljs go">//&nbsp;Interfaces&nbsp;about&nbsp;plugin.&nbsp;type&nbsp;(
&nbsp;&nbsp;&nbsp;&nbsp;Plugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name()&nbsp;string&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostRegPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostReg(*Handler)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostDialPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostDial(ForeSession)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostAcceptPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostAccept(ForeSession)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PreWritePullPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreWritePull(WriteCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostWritePullPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostWritePull(WriteCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PreWriteReplyPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreWriteReply(WriteCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostWriteReplyPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostWriteReply(WriteCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PreWritePushPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreWritePush(WriteCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostWritePushPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostWritePush(WriteCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PreReadHeaderPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreReadHeader(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostReadPullHeaderPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostReadPullHeader(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PreReadPullBodyPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreReadPullBody(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostReadPullBodyPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostReadPullBody(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostReadPushHeaderPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostReadPushHeader(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PreReadPushBodyPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreReadPushBody(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostReadPushBodyPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostReadPushBody(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostReadReplyHeaderPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostReadReplyHeader(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PreReadReplyBodyPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreReadReplyBody(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;PostReadReplyBodyPlugin&nbsp;interface&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Plugin
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostReadReplyBody(ReadCtx)&nbsp;Xerror
&nbsp;&nbsp;&nbsp;&nbsp;}
)</pre><p style="color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;">
	四、更多细节优化</p><ol style="margin-left:22px;color:#2F2F2F;font-family:-apple-system, &#39;SF UI Text&#39;, Arial, &#39;PingFang SC&#39;, &#39;Hiragino Sans GB&#39;, &#39;Microsoft YaHei&#39;, &#39;WenQuanYi Micro Hei&#39;, sans-serif;font-size:16px;" class=" list-paddingleft-2"><li><p>
		运行日志中打印增加包序号seq，便于debug	</p></li><li><p>
		当收到不支持的包类型时，断开连接并打印包详情	</p></li><li><p>
		tp.PullCmd增加func (c *PullCmd) Result() (interface{}, Xerror)方法，便于使用Session.GoPull方法进行并发请求	</p></li><li><p>
		升级平滑重启与关闭功能	</p></li><li><p>
		增加对并发资源的控制，防止内存资源耗尽	</p></li><li><p>
		一些代码块的细节优化</p></li></ol>
---------------
<h1 id="#title_18" >19、深度操作系统 15.5 BETA 发布 —— 小而美的功能</h1>

[https://www.oschina.net/news/90614/deepin-15-5-beta-released](https://www.oschina.net/news/90614/deepin-15-5-beta-released)
<p><img src="https://static.oschina.net/uploads/space/2017/1115/182148_j8qw_2720166.jpg"/></p><p>深度操作系统是一个致力于为全球用户提供美观易用、安全可靠的Linux发行版。</p><p>深度操作系统15.5 Beta相较于之前的版本而言，除了全面适配的高分屏支持和Flatpak应用格式支持，采用了全新Web应用框架，新增了Wifi热点分享及色温调节等功能，更重要的是对网络模块和桌面环境等进行了全面优化。</p><p>关于网络模块和桌面环境优化，你不得不知道的一些小功能，请随我们一起来看看吧！</p><h3>VPN导出导入功能</h3><p>优化代理功能，新增VPN导出导入功能，快速导出已配置VPN文件，同时导入已有的配置文件。</p><p><img src="https://static.oschina.net/uploads/img/201711/15181114_01hL.jpg"/></p><h3>应用代理功能</h3><p>进行代理设置时，不同的应用对代理的环境要求不一样（比如网易云音乐和Spotify），这时便可以选择应用代理，指定某个应用即可。</p><p><img src="https://static.oschina.net/uploads/img/201711/15181114_3a8o.jpg"/></p><h3>启动器图标缩放功能</h3><p>在高分屏设备上，系统会自动适配一个最合适的图标大小；在普通设备上，可以自由地通过快捷键和滚轮（Ctrl =/- 或Ctrl+滚轮）对图标进行缩放。</p><p><img src="https://static.oschina.net/uploads/img/201711/15181114_oSFZ.jpg"/></p><h3>桌面图标避让功能</h3><p>除了自动排列图标功能外，需要移动图标到桌面某个指定位置时，可以拖动图标到其他图标自动进行避让。</p><p><img src="https://static.oschina.net/uploads/img/201711/15181114_lCWr.jpg"/></p><h3>任务栏插件隐藏功能</h3><p>在时尚模式和高效模式下，如果希望任务栏上更加清爽干净，可以选择点击任务栏右键隐藏插件图标。</p><p><img src="https://static.oschina.net/uploads/img/201711/15181115_XVmF.jpg"/></p><h3>应用强制退出功能</h3><p>在使用过程中，遇到某个应用失去响应时，可以快速地在任务栏上点击鼠标右键强制退出应用。</p><p><img src="https://static.oschina.net/uploads/img/201711/15181115_M591.jpg"/></p><h3>应用包缓存清理功能</h3><p>每次当系统更新升级，安装应用包都会在存放缓存目录下，磁盘空间也随之被占用，定时进行清理缓存包，释放更多的空间。</p><p><img src="https://static.oschina.net/uploads/img/201711/15181115_q9qU.jpg"/></p><h3>下载：</h3><p></p>
---------------
<h1 id="#title_19" >20、高手问答 | iView 作者带来的 Vue.js 实战分享</h1>

[https://www.oschina.net/question/2720166_2269719](https://www.oschina.net/question/2720166_2269719)
<p>OSCHINA 本期高手问答(11 月 15 日 - 11 月 21 日)我们请来了@aresn 为大家解答关于 Vue.js 实战方面的问题。</p>
---------------
<h1 id="#title_20" >21、文章： 京东11·11：撬动数据中心的支点——京东阿基米德</h1>
鲍永成
[http://www.infoq.com/cn/articles/jingdong-11-11-JDOS?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global](http://www.infoq.com/cn/articles/jingdong-11-11-JDOS?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global)
<img src="https://res.infoq.com/articles/jingdong-11-11-JDOS/zh/smallimage/1-1510762378438.jpg"/><p>今年11.11，京东数据中心操作系统（JDOS）阿基米德已经全面接管了应用资源调度。每日调度百万台容器实例运转，每日为离线计算提供了多达3000万核·小时的计算资源，SLA履约率达到98.3%。在保证业务的正常运行下，集群的平均资源利用率提升3倍。仅在11.11备战期间，通过资源调度节省数亿元服务器采购成本。本文对京东阿基米德项目的架构和核心技术进行分享，希望能为业界提供一些参考。</p> <i>By 鲍永成</i>
---------------
<h1 id="#title_21" >22、开源系列产品合集 Elastic Stack 6.0 正式版发布</h1>

[https://www.oschina.net/news/90607/elastic-stack-6-0-0-ga](https://www.oschina.net/news/90607/elastic-stack-6-0-0-ga)
<p>Elastic Stack 6.0.0 正式版已发布，ElasticStack 是一系列开源产品的合集，包括 Elasticsearch、Kibana、Logstash 以及 Beats 等等，能够安全可靠地获取任何来源、任何格式的数据，并且能够实时地对数据进行搜索、分析和可视化。同时，开发团队还发布了&nbsp;</p></li></ul>
---------------
<h1 id="#title_22" >23、IntelliJ IDEA 2017.2.6 发布，Bug 修复和新特性添加</h1>

[https://www.oschina.net/news/90606/intellij-idea-2017-2-6-released](https://www.oschina.net/news/90606/intellij-idea-2017-2-6-released)
<p>IntelliJ IDEA 2017.2.6 已发布。该版本主要是修复部分 bug，此外还添加了两个新特性。</p><p>修复的 bug 较多，主要集中在 Groovy 和 Gradle 这两块，如修复了 Groovy 隐式转换不被识别的 bug，使用 Java 9 刷新 Gradle 项目时出错的问题。</p><p>新增的特性包括：<br/></p><ul class=" list-paddingleft-2" style="list-style-type: disc;"><li><p>在 Java. Inspections 中，当返回类型是 java.lang.Void 时，允许<em>Return of &#39;null&#39;</em>被忽略</p></li></ul><p>更多更新内容如下：</p><table class="cke_show_border" style="width: 701px;"><tbody><tr class="firstRow"><td rowspan="3"><strong>No subsystem</strong></td><td>Bug</td><td></p>
---------------
<h1 id="#title_23" >24、Linux Mint 18.3 Beta 发布，全新备份工具</h1>

[https://www.oschina.net/news/90605/linux-mint-18-3-beta](https://www.oschina.net/news/90605/linux-mint-18-3-beta)
<p>此前我们曾报道过 Linux Mint 18.3 将以 Sylvia 为代号，并将可能成为最后一个使用 KDE 桌面的版本。恰逢&nbsp;</p>
---------------
<h1 id="#title_24" >25、xApi Manager v2.0.2 发布，支持php7.1、php7.2</h1>

[https://www.oschina.net/news/90604/xapi-manager-2-0-2](https://www.oschina.net/news/90604/xapi-manager-2-0-2)
<p style="color:#333333;font-family:&quot;font-size:16px;background-color:#FFFFFF;"><span style="font-weight:bolder;">v2.0.2 &nbsp;版本更新说明</span></p><p style="color:#333333;font-family:&quot;font-size:16px;background-color:#FFFFFF;">
	1. 优化代码兼容性，已支持php5.6、php7.0、php7.1、php7.2<br/>2. Api详情及在线调试，支持json、jsonp、xml、html格式的数据返回<br/>3. 修复Api详情单击调试后请求方式错误的问题<br/>4. 添加Api时，版本号长度改为12个字符<br/><br/>v2.0版本根据用户反馈及实际使用场景进行了一次大的重构，支持了多项目多环境、企业密钥等若干改进和优化，欢迎大家下载使用，如果您在使用中遇到什么问题请及时向我们反馈。也欢迎大家共同探讨一些技术问题、交流一些想法。<br/>￼<br/>官方演示地址：(安装和升级请参考操作手册)</p><p style="color:#333333;font-family:&quot;font-size:16px;background-color:#FFFFFF;">
	开源图书社区:&nbsp;</p><p style="color:#333333;font-family:&quot;font-size:16px;background-color:#FFFFFF;">
	我们的愿景是做最好的接口管理平台，如果您感兴趣，欢迎加入我们的开发团队<br/><br/>XAPI MANAGER -专业实用的开源接口管理平台，为程序开发者提供一个灵活，方便，快捷的API管理工具，让API管理变的更加清晰、明朗。<br/><img src="https://static.oschina.net/uploads/space/2017/1025/102209_NLeU_3436299.jpg" alt="" style="width:auto;height:auto;"/></p><p style="color:#333333;font-family:&quot;font-size:16px;background-color:#FFFFFF;"><span style="font-weight:bolder;">特点</span></p><ol style="color:#333333;font-family:&quot;font-size:16px;background-color:#FFFFFF;" class=" list-paddingleft-2"><li><p>
			全站基于 Laravel 5.4 + Bootstrap + jQuery +layer3.0开发		</p></li><li><p>
			开放源代码，开发者可以根据自己的需求自由使用和定制		</p></li><li><p>
			让开发者更加专注于项目业务和逻辑的实现及协同开发		</p></li><li><p>
			支持多项目、多环境管理，支持消息通知及帮助中心		</p></li></ol><p style="color:#333333;font-family:&quot;font-size:16px;background-color:#FFFFFF;"><br/>码云地址：</p>
---------------
<h1 id="#title_25" >26、2017 最优秀的十大 Linux 服务器发行版</h1>

[https://my.oschina.net/editorial-story/blog/1573554](https://my.oschina.net/editorial-story/blog/1573554)
<p>摘要: 在这篇文章中，我们将基于以下的考虑因素列出 2017 最优秀的十大 Linux 服务器发行版：与受支持的功能和硬件相关的数据中心的性能和可靠性；是否易于安装和使用；在许可方面的所有权和维护相关的问题；商业支持的可接入性</p>
---------------
<h1 id="#title_26" >27、文章： 以计算机视觉为例，告诉你如何将AI引入你的工作</h1>
苑维然
[http://www.infoq.com/cn/articles/involve-ai-to-your-work?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global](http://www.infoq.com/cn/articles/involve-ai-to-your-work?utm_campaign=infoq_content&utm_source=infoq&utm_medium=feed&utm_term=global)
<img src="https://res.infoq.com/articles/involve-ai-to-your-work/zh/smallimage/DNUN-logo-small-1510764916651.jpg"/><p>对不少企业来说，如何开始一个 AI 业务是一个难题，需不需要 AI 来进行业务的辅助？是否需要组建一个自己的算法团队？我们整理了格灵深瞳创始团队苑维然先生的主题演讲《如何开始一个 AI 业务：以计算机视觉为例》希望能够给有同样困扰的读者一些启发与帮助。</p> <i>By 苑维然</i>
---------------
<h1 id="#title_27" >28、Dubbo 疯狂更新！阿里开源要搞大事情？</h1>

[https://www.oschina.net/news/90601/dubbo-update](https://www.oschina.net/news/90601/dubbo-update)
<p>因今年公司新产品线较多，为了降低耦合，达到业务分离、重用，提高内部开发效率的目的，采用了基于服务组件、前后端分离的架构体系。</p><p>Dubbo启动维护后，阿里中间件（Aliware）组建了由专职人员和RPC技术专家组成的虚拟维护团队。通过这篇文章，Dubbo的虚拟维护团队将和大家分享一些Dubbo启动维护的历程、取得的成绩以及后续的规划，具体包括Dubbo社区的建设情况、当前的版本维护主线、近期roadmap及后续计划等。<br/></p><p><br/></p><p><img data-cke-saved-src="https://static.oschina.net/uploads/space/2017/1115/083627_olci_2903254.png" src="https://static.oschina.net/uploads/space/2017/1115/083627_olci_2903254.png" width="670" height="317"/></p><p>我们一起总结下Dubbo项目的进展、维护后整个社区的变化以及包括后续版本的roadmap等，同时也分享一些我们对Dubbo期待和想法。</p><p><strong>一、社区建设概况</strong></p><p>&nbsp;Dubbo启动维护后我们组建了由专职人员和RPC技术专家组成的虚拟维护团队，首先组织专人对官网和使用文档进行了重新整理，后续又以社区反馈为主线发布了2.5.5等维护版本。</p><p><strong>已发布的内容</strong></p><ul class=" list-paddingleft-2"><li><p>[官网](http://dubbo.io)发布新版</p></li><li><p>文档重新整理后发布到[</p>
---------------
<h1 id="#title_28" >29、每日一博 | Jenkins+SVN+Maven 自动化部署环境搭建</h1>

[https://my.oschina.net/u/3712053/blog/1573648](https://my.oschina.net/u/3712053/blog/1573648)
<p>因今年公司新产品线较多，为了降低耦合，达到业务分离、重用，提高内部开发效率的目的，采用了基于服务组件、前后端分离的架构体系。</p>
---------------
<h1 id="#title_29" >30、N 次跳票后，Fedora 27 正式版终于发布了</h1>

[https://www.oschina.net/news/90599/fedora-27-released](https://www.oschina.net/news/90599/fedora-27-released)
<p><img alt="" data-cke-saved-src="https://static.oschina.net/uploads/space/2017/1115/082038_sJaE_2896879.jpg" src="https://static.oschina.net/uploads/space/2017/1115/082038_sJaE_2896879.jpg"/><br/></p><p>Fedora&nbsp;项目组宣布 Fedora 27 Workstation 和 Fedora 27 Atomic 版本正式发布。Fedora 27 整合了来自 Fedora 社区和各种上游软件项目的数千项改进。</p><p>你可以从 </p><p>新版本还包含了 LibreOffice 5.4。 LibreOffice 的最新版本在 Writer 和 Calc 以及 EMF + 矢量图像导入方面提供了新的功能和改进。现在也可以使用 OpenPGP 密钥来签署 ODF 文档。</p><p><strong>Fedora Atomic Host</strong></p><p>Fedora Atomic 27 现在默认为更简单的容器存储设置。 此外，它还提供 Kubernetes、flannel 等。 这些更改为用户选择不同版本的 Kubernetes 或根本不使用 Kubernetes 带来了灵活性。 此版本随附最新的 rpm-ostree ，支持基本包覆盖。 Cockpit 也更新到了最新版本。<br/></p><p><strong>Fedora Server</strong></p><p>Fedora Server&nbsp;尚未正式发布，是由于正在进行模块化重组。这将允许 Fedora Server 用户体验更加模块化的操作系统，最终版本计划在一个月后发布。</p>
---------------
<h1 id="#title_30" >31、码云周刊 | 盘点那些值得你了解的 10 本编程教程</h1>

[https://my.oschina.net/gitosc/blog/1570058](https://my.oschina.net/gitosc/blog/1570058)
<p>现在很多用户将自己翻译的书籍或教程样例都放在码云上，免费提供给大家阅读和学习。</p>
---------------
<h1 id="#title_31" >32、码云推荐 | Java 版 Gitee 网站 API Gitee-client</h1>

[https://gitee.com/wuyu15255872976/gitee-client](https://gitee.com/wuyu15255872976/gitee-client)
<p>Gitee-client&nbsp;是&nbsp;Gitee&nbsp;网站 API 的 Java 语言版本。</p>
---------------
<h1 id="#title_32" >33、Chalktalk —— 数字化演示和交流工具</h1>

[https://www.oschina.net/p/chalktalk](https://www.oschina.net/p/chalktalk)
<p>使用类似黑板的界面，演示者可以创建数字化动画原型图并与其进行交互，以便在现场演示或对话中展示自己的想法和理念。</p>
---------------
<h1 id="#title_33" >34、OSChina 周三乱弹 ——产品经理就爱这么给程序出题</h1>

[https://my.oschina.net/xxiaobian/blog/1573690](https://my.oschina.net/xxiaobian/blog/1573690)
<p>一个胖胖的女孩，周末偷偷早起，想模仿电影里穿着男友的衬衣做一份可口的早餐。 可才到第一步就把衣服给撑破了，于是又悄悄把衣服叠好放回原位，不动声响地爬上床，抱着男友继续睡去</p>
---------------
<h1 id="#title_34" >35、微软首席研究员：函数式编程语言时代已经来临</h1>

[https://www.oschina.net/news/90593/the-time-of-functional-programming-language](https://www.oschina.net/news/90593/the-time-of-functional-programming-language)
<blockquote><p>Simon Peyton Jones 将 Haskell 等函数式编程语言描述为：它们是程序员灵感的来源</p></blockquote><p><img data-cke-saved-src="https://static.oschina.net/uploads/space/2017/1115/075651_O6zV_2903254.png" src="https://static.oschina.net/uploads/space/2017/1115/075651_O6zV_2903254.png" width="650" height="402" border="0" hspace="0" vspace="0" title="" style="width: 650px; height: 402px;"/><br/></p><p>微软首席研究员兼 Haskell 的主要贡献者&nbsp;&nbsp;Simon Peyton Jones 在一次采访中说到，函数式编程语言将在主流编程语言中占据一席之地。</p><p><strong>函数式编程语言时代已经来临</strong></p><p>Simon 谈到，大多数编程语言的构建方式都是命令式的，需要预先设定执行命令。但函数式编程语言就不一样，它会直接输出结果。比如 Excel 表格里的方程式，它并不显示计算步骤，只显示最后的计算结果。他认为函数式编程语言能够帮助验证程序员的新想法，它们易于理解，也易于处理，只要你有能力驾驭，它们就能为你提供强有力的帮助。</p><p>Simon 还认为，函数式编程语言可以避免运算单元之间发生交互，来实现并行运算。但这要求程序员对程序每个环节的交互都非常了解，从而降低 bug 出现率。</p><p>过去几年，函数式编程语言的许多优秀特性，都得到了其他编程语言的认可和模仿。但函数式编程语言并没有停止创新的步伐。Haskell 和 OCaml 可以说是函数式编程语言创新的主力，一些函数式编程语言已经成为主流编程语言的一部分。</p><p>虽说函数式编程语言的市场相对较小，但已经存在了 27 年，所以用户群体比较强大。而且，许多企业也也在使用函数式编程语言。如，Bloomberg 和谷歌等，Facebook 也在用 Haskell 进行垃圾过滤。</p><p>Simon 最后还总结道：就编写软件来说，函数式编程语言对于复杂性的管理，是命令式编程语言无法比拟的。</p><p>编译自：</p>
---------------
<h1 id="#title_35" >36、慕尼黑放弃 Linux，2020 年或将全面迁入 Windows</h1>

[https://www.oschina.net/news/90592/2020-move-from-linux-to-windows](https://www.oschina.net/news/90592/2020-move-from-linux-to-windows)
<p>慕尼黑决定放弃微软服务转向开源软件的时候，得到了很多人的支持。然而，</p>
---------------
<h1 id="#title_36" >37、主流浏览器都加入了 WebAssembly 支持</h1>

[https://www.oschina.net/news/90591/popular-browsers-add-webassembly](https://www.oschina.net/news/90591/popular-browsers-add-webassembly)
<p>过去几周，苹果和微软先后释出了新版的 &nbsp;Safari 和 Edge，分别加入了对 WebAssembly 的支持，加上已经支持的 Firefox 和 Chrome，四大主流浏览器
 WebAssembly 二进制格式 wasm。</p><p>WebAssembly 源于 Mozilla 发起的 Asm.js 项目，设计补充 
JavaScript，其本地解码速度比 JS 解析快得多，让高性能的 Web 
应用在浏览器上运行成为可能，比如视频游戏、计算机辅助设计、视频和图像编辑、科学可视化等等。开发者可以访问 </p>
---------------
<h1 id="#title_37" >38、Elasticsearch 6.0.0 正式发布，带来大量新特性</h1>

[https://www.oschina.net/news/90590/elasticsearch-6-0-0-released](https://www.oschina.net/news/90590/elasticsearch-6-0-0-released)
<p>在 Elasticsearch 5.0.0&nbsp;发布之后，Elasticsearch&nbsp;在333个 commite、2236 个合并请求下，发布了基于 Lucene 7.0.1 的 Elasticsearch 6.0.0&nbsp;正式版。</p><ul class=" list-paddingleft-2"><li><p></p>
---------------
<h1 id="#title_38" >39、MariaDB 10.1.29 发布，MySQL 分支版本</h1>

[https://www.oschina.net/news/90589/mariadb-10-1-29](https://www.oschina.net/news/90589/mariadb-10-1-29)
<p>MariaDB 10.1.29 发布了。MariaDB 数据库管理系统是 MySQL 的一个分支，主要由开源社区在维护，采用 GPL 授权许可 MariaDB 的目的是完全兼容 MySQL，包括 API 和命令行。</p><h2>主要更新</h2><h3>Mariabackup</h3><ul class=" list-paddingleft-2"><li><p>.</p>
---------------